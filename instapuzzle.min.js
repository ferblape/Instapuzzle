function newTimer(b){return{seconds:0,minutes:0,selector:b,printTime:function(){jQuery(b).html((this.minutes<10?"0"+this.minutes:this.minutes)+":"+(this.seconds<10?"0"+this.seconds:this.seconds))},increaseTime:function(){this.seconds<59?this.seconds++:(this.seconds=0,this.minutes++);this.printTime()},start:function(){setInterval(function(b){b.increaseTime()},1E3,this)}}}
function newPuzzle(b,i){for(var e=b*b,f=612/b,j=[],g=[],d=0;d<e;d++)j[d]=d,g[d]=d;for(var g=g.sort(function(){return 0.5-Math.random()}).sort(function(){return 0.5-Math.random()}),k=g[e-1],h=[],d=0;d<b;d++)for(e=0;e<b;e++){var l=d*b+e,m=jQuery("<img />").attr("src",i).attr("height",612).attr("width",612).css("position","relative").css("top",-1*d*f).css("left",-1*e*f);h[l]={id:l,html_node:m}}return{solution:j,positions:g,blank_position:k,images:h,timer:newTimer(".time"),moves:0,build:function(){var a=
jQuery("<div>"),c=jQuery("<img />").attr("src",i),d=this;c.fadeIn(2500,function(){jQuery("#puzzle").html("");for(var a=0;a<b;a++)for(var c=0;c<b;c++){var e=jQuery('<div class="piece" id="piece-'+(a*b+c)+'"></div>').css("top",a*f).css("left",c*f).css("height",f).css("width",f);a*b+c!=k&&e.append(h[g[a*b+c]].html_node);e.click(function(){d.move(jQuery(this).attr("id").match(/[0-9]+/)[0],d.blank_position)});jQuery("#puzzle").append(e)}d.timer.start()});a.append(c);jQuery("#puzzle").append(a)},solved:function(){for(var a=
0;a<b*b;a++)if(this.positions[a]!=this.solution[a])return!1;return!0},move:function(a,c){a=parseInt(a);c=parseInt(c);if(!(a!=this.blank_position&&c!=this.blank_position||a==c)){if(a>c)var d=a,e=c;else d=c,e=a;if(!(d-e!=1&&d-e!=b))d=this.positions[a],this.positions[a]=this.positions[c],this.positions[c]=d,this.blank_position=this.blank_position==a?c:a,jQuery(".piece:eq("+a+")").html(""),jQuery(".piece:eq("+c+")").html(this.images[this.positions[c]].html_node),this.moves++,jQuery(".moves").html(this.moves==
1?"1 move":this.moves+" moves"),this.solved()&&(alert("Solved!!"),jQuery(".piece:eq("+this.blank_position+")").html(this.images[this.blank_position].html_node))}}}}jQuery(document).ready(function(b){b.ajax({url:"https://api.instagram.com/v1/media/popular?client_id=f0d3cc511b8a4f31868cab5c7f7b8f0d",dataType:"jsonp",success:function(b){newPuzzle(3,b.data[0].images.standard_resolution.url).build()}})});
